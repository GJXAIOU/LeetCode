---
layout:     post
title:      371.两整数之和
subtitle:   Math.easy
date:       2020-02-03
author:     GJXAIOU
header-img: img/post-bg-leetcode.png
catalog: true
tags:
    - 数学
    - 位运算
	- 完成
---

# 371.两整数之和

## 一、题目

不使用运算符 + 和 - ，计算两整数 a 、b 之和。

- 示例 1:

> 输入: a = 1, b = 2
> 输出: 3

- 示例 2:

> 输入: a = -2, b = 3
> 输出: 1

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/sum-of-two-integers
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。



## 二、解答

题目说不能使用运算符 + 和 -，那么我们就要使用其他方式来替代这两个运算符的功能。

位运算中的加法
我们先来观察下位运算中的两数加法，其实来来回回就只有下面这四种：

> 0 + 0 = 0
> 0 + 1 = 1
> 1 + 0 = 1
> 1 + 1 = 0（进位 1）

仔细一看，这可不就是相同位为 0，不同位为 1 的异或运算结果嘛~

异或和与运算操作
我们知道，在位运算操作中，异或的一个重要特性是无进位加法。我们来看一个例子：

> a = 5 = 0101
> b = 4 = 0100

a ^ b 如下：

> 0 1 0 1
>
> 0 1 0 0
>
> `------`
>
> 0 0 0 1

**a ^ b 得到了一个无进位加法结果**，如果要得到 a + b 的最终值，我们还要**找到进位的数**，把这二者相加。在位运算中，我们可以使用与操作获得进位：

> a = 5 = 0101
> b = 4 = 0100

a & b 如下：

> 0 1 0 1
>
> 0 1 0 0
>
> `------`
>
> 0 1 0 0

由计算结果可见，0100 并不是我们想要的进位，1 + 1 所获得的进位应该要放置在它的更高位，即左侧位上，因此我们还要把 0100 左移一位，才是我们所要的进位结果。



**方法：利用位操作实现加法**

首先看十进制是如何做的： 5+7=12，三步走，其中 5 对应二进制：`101`， 7 对应二进制：`111`

- 第一步：相加各位的值，不算进位，得到010，**二进制每位相加就相当于各位做异或操作**，101^111。

- 第二步：计算进位值，得到1010，**相当于各位进行与操作得到101**，再向左移一位得到1010，(101&111)<<1。

- 第三步重复上述两步，各位相加 010^1010=1000，进位值为100=(010 & 1010)<<1。

- 继续重复上述两步：1000^100 = 1100，进位值为0，跳出循环，1100为最终结果。

- 结束条件：进位为0，即a为最终的求和结果。

```java
package math.easy;

/**
 * @Author GJXAIOU
 * @Date 2020/2/4 16:01
 */
public class LeetCode371 {
    public int getSum(int a, int b) {
        // b 表示进位
        while(b != 0){
            int temp  = a ^ b;
            b = (a & b) << 1;
            a = temp;
        }
        return a;
    }
}

```

